import{c as H,r as A,j as t,b as B,H as D}from"./app-DKWe1icr.js";import{M as _}from"./module-heading-DtY0islm.js";import{A as k}from"./app-layout-DweA3rWy.js";import{T as S,a as l,b as I,c as h,d as L,e as M}from"./table-C1O4oa8U.js";import{I as R}from"./input-Bh5skcg8.js";import{B as w}from"./badge-CpRXg8-e.js";import{P}from"./pagination-CI5d4wmD.js";import{S as $}from"./search-y3z3_d1C.js";/* empty css            */import"./button-DC9ujsaf.js";import"./mainLogo-BoT_gzEH.js";import"./dialog-SVX4YQ6l.js";import"./index-e-6jZulE.js";import"./index-ChT5TkRo.js";import"./x-BmDpesor.js";import"./index-Bk7ovR3V.js";import"./index-B1hpVG1M.js";import"./index-CrNkuVkm.js";import"./dropdown-menu-BhGi4quI.js";import"./index-D6b3eXot.js";import"./store-BQFeCD8Z.js";import"./qr-code-BVJ9mbgm.js";import"./ticket-Dv3GjaeT.js";import"./send-uMdzQh28.js";import"./chevron-left-BLwUV_l4.js";function he(r){const e=H.c(25),{stampCodes:a,filters:U}=r,[i,E]=A.useState(U.search||"");let u,j;e[0]!==i?(u=()=>{const s=setTimeout(()=>{B.get("/business/stamp-codes",{search:i},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},j=[i],e[0]=i,e[1]=u,e[2]=j):(u=e[1],j=e[2]),A.useEffect(u,j);const f=z,T=q;let p,g;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(D,{title:"Stamp Codes"}),g=t.jsx(_,{title:"Stamp Codes",description:"Manage your issued stamp codes."}),e[3]=p,e[4]=g):(p=e[3],g=e[4]);let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e[5]=y):y=e[5];let N;e[6]===Symbol.for("react.memo_cache_sentinel")?(N=s=>E(s.target.value),e[6]=N):N=e[6];let c;e[7]!==i?(c=t.jsxs("div",{className:"mb-4 relative",children:[y,t.jsx(R,{type:"text",placeholder:"Search stamp codes or customers...",value:i,onChange:N,className:"pl-10"})]}),e[7]=i,e[8]=c):c=e[8];let n;e[9]!==a.data?(n=a.data.length>0?a.data.map(s=>t.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"font-mono font-medium text-sm break-all pr-2",children:[s.loyalty_card.name," | ",s.code]}),T(s)]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 font-medium",children:"Customer:"}),s.customer?t.jsxs("div",{className:"mt-1",children:[t.jsx("div",{className:"font-medium",children:s.customer.username}),t.jsx("div",{className:"text-gray-500 text-xs",children:s.customer.email})]}):t.jsx("span",{className:"text-gray-400 ml-2",children:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 font-medium",children:"Used At: "}),t.jsx("span",{className:"text-gray-700",children:f(s.used_at)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 font-medium",children:"Created: "}),t.jsx("span",{className:"text-gray-700",children:f(s.created_at)})]})]})]},s.id)):t.jsx("div",{className:"bg-white border rounded-lg p-8 text-center text-gray-500",children:"No stamp codes found."}),e[9]=a.data,e[10]=n):n=e[10];let d;e[11]!==n?(d=t.jsx("div",{className:"block lg:hidden space-y-4",children:n}),e[11]=n,e[12]=d):d=e[12];let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(I,{children:t.jsxs(S,{children:[t.jsx(h,{children:"Loyalty Card"}),t.jsx(h,{children:"Code"}),t.jsx(h,{children:"Customer"}),t.jsx(h,{children:"Status"}),t.jsx(h,{children:"Used At"}),t.jsx(h,{children:"Created At"})]})}),e[13]=b):b=e[13];let m;e[14]!==a.data?(m=a.data.length>0?a.data.map(s=>t.jsxs(S,{children:[t.jsx(l,{children:s.loyalty_card.name}),t.jsx(l,{className:"font-mono font-medium",children:s.code}),t.jsx(l,{children:s.customer?t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:s.customer.username}),t.jsx("div",{className:"text-sm text-gray-500",children:s.customer.email})]}):t.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),t.jsx(l,{children:T(s)}),t.jsx(l,{children:f(s.used_at)}),t.jsx(l,{children:f(s.created_at)})]},s.id)):t.jsx(S,{children:t.jsx(l,{colSpan:5,className:"text-center py-8",children:"No stamp codes found."})}),e[14]=a.data,e[15]=m):m=e[15];let o;e[16]!==m?(o=t.jsx("div",{className:"hidden lg:block border rounded-lg overflow-x-auto",children:t.jsxs(L,{children:[b,t.jsx(M,{children:m})]})}),e[16]=m,e[17]=o):o=e[17];let x;e[18]!==a?(x=a.last_page>1&&t.jsx(P,{data:a}),e[18]=a,e[19]=x):x=e[19];let v;return e[20]!==o||e[21]!==x||e[22]!==c||e[23]!==d?(v=t.jsxs(k,{children:[p,g,t.jsxs("div",{className:"mt-4 sm:mt-6  sm:px-0",children:[c,d,o,x]})]}),e[20]=o,e[21]=x,e[22]=c,e[23]=d,e[24]=v):v=e[24],v}function q(r){return r.is_expired?t.jsx(w,{className:"bg-red-500 text-white",children:"Expired"}):r.used_at?t.jsx(w,{className:"bg-green-500 text-white",children:"Used"}):t.jsx(w,{variant:"default",children:"Active"})}function z(r){return r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}export{he as default};
