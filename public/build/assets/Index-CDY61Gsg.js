import{c as H,r as A,j as s,b as B,H as D}from"./app-6m_tBlQ0.js";import{M as _}from"./module-heading-BM907XPG.js";import{A as k}from"./app-layout-BKpGLU3M.js";import{T as S,a as i,b as I,c as h,d as L,e as M}from"./table-CXlMcLNf.js";import{I as R}from"./input-BTbceNkS.js";import{B as w}from"./badge-CH208ZfP.js";import{P}from"./pagination-Di1FDD5S.js";import{S as $}from"./search-7MuQjbPZ.js";/* empty css            */import"./mainLogo-C_8TsP8m.js";import"./utils-DFaayVYX.js";import"./index-D7Nf6Ao1.js";import"./index-DyDgrtE5.js";import"./index-C_9dUjvr.js";import"./x-DJg8p6-8.js";import"./index-CnAgjxnu.js";import"./dropdown-menu-OUhalNE1.js";import"./index-D6b3eXot.js";import"./store-Upluw5Zr.js";import"./ticket-NfnqDTX4.js";import"./chevron-left-DZYOyc1p.js";function de(r){const e=H.c(25),{stampCodes:a,filters:U}=r,[l,E]=A.useState(U.search||"");let u,j;e[0]!==l?(u=()=>{const t=setTimeout(()=>{B.get("/business/stamp-codes",{search:l},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},j=[l],e[0]=l,e[1]=u,e[2]=j):(u=e[1],j=e[2]),A.useEffect(u,j);const f=z,T=q;let p,g;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(D,{title:"Stamp Codes"}),g=s.jsx(_,{title:"Stamp Codes",description:"Manage your issued stamp codes."}),e[3]=p,e[4]=g):(p=e[3],g=e[4]);let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e[5]=y):y=e[5];let N;e[6]===Symbol.for("react.memo_cache_sentinel")?(N=t=>E(t.target.value),e[6]=N):N=e[6];let c;e[7]!==l?(c=s.jsxs("div",{className:"mb-4 relative",children:[y,s.jsx(R,{type:"text",placeholder:"Search stamp codes or customers...",value:l,onChange:N,className:"pl-10"})]}),e[7]=l,e[8]=c):c=e[8];let n;e[9]!==a.data?(n=a.data.length>0?a.data.map(t=>s.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"font-mono font-medium text-sm break-all pr-2",children:[t.loyalty_card.name," | ",t.code]}),T(t)]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Customer:"}),t.customer?s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"font-medium",children:t.customer.username}),s.jsx("div",{className:"text-gray-500 text-xs",children:t.customer.email})]}):s.jsx("span",{className:"text-gray-400 ml-2",children:"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Used At: "}),s.jsx("span",{className:"text-gray-700",children:f(t.used_at)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 font-medium",children:"Created: "}),s.jsx("span",{className:"text-gray-700",children:f(t.created_at)})]})]})]},t.id)):s.jsx("div",{className:"bg-white border rounded-lg p-8 text-center text-gray-500",children:"No stamp codes found."}),e[9]=a.data,e[10]=n):n=e[10];let d;e[11]!==n?(d=s.jsx("div",{className:"block lg:hidden space-y-4",children:n}),e[11]=n,e[12]=d):d=e[12];let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(I,{children:s.jsxs(S,{children:[s.jsx(h,{children:"Loyalty Card"}),s.jsx(h,{children:"Code"}),s.jsx(h,{children:"Customer"}),s.jsx(h,{children:"Status"}),s.jsx(h,{children:"Used At"}),s.jsx(h,{children:"Created At"})]})}),e[13]=b):b=e[13];let m;e[14]!==a.data?(m=a.data.length>0?a.data.map(t=>s.jsxs(S,{children:[s.jsx(i,{children:t.loyalty_card.name}),s.jsx(i,{className:"font-mono font-medium",children:t.code}),s.jsx(i,{children:t.customer?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.customer.username}),s.jsx("div",{className:"text-sm text-gray-500",children:t.customer.email})]}):s.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),s.jsx(i,{children:T(t)}),s.jsx(i,{children:f(t.used_at)}),s.jsx(i,{children:f(t.created_at)})]},t.id)):s.jsx(S,{children:s.jsx(i,{colSpan:5,className:"text-center py-8",children:"No stamp codes found."})}),e[14]=a.data,e[15]=m):m=e[15];let o;e[16]!==m?(o=s.jsx("div",{className:"hidden lg:block border rounded-lg overflow-x-auto",children:s.jsxs(L,{children:[b,s.jsx(M,{children:m})]})}),e[16]=m,e[17]=o):o=e[17];let x;e[18]!==a?(x=a.last_page>1&&s.jsx(P,{data:a}),e[18]=a,e[19]=x):x=e[19];let v;return e[20]!==o||e[21]!==x||e[22]!==c||e[23]!==d?(v=s.jsxs(k,{children:[p,g,s.jsxs("div",{className:"mt-4 sm:mt-6  sm:px-0",children:[c,d,o,x]})]}),e[20]=o,e[21]=x,e[22]=c,e[23]=d,e[24]=v):v=e[24],v}function q(r){return r.is_expired?s.jsx(w,{className:"bg-red-500 text-white",children:"Expired"}):r.used_at?s.jsx(w,{className:"bg-green-500 text-white",children:"Used"}):s.jsx(w,{variant:"default",children:"Active"})}function z(r){return r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}export{de as default};
