import{a as Le,c as Xe,r as $e,u as Ye,j as s,b as Me,H as Ge}from"./app-CtPGu9oB.js";import{A as Je}from"./app-layout-CjZIaKT0.js";import{M as Ke}from"./module-heading-CQGN9HCz.js";import{c as Ae,d as Fe,C as Qe,a as We,b as Ze}from"./card-DAmVBBac.js";import{f as es,D as ss,a as ts,b as ls,c as as,d as rs,e as is}from"./dialog-CoQ7gJD3.js";import{B as ve}from"./button-RROpoE5n.js";import{I as He}from"./input-U50CKN05.js";import{L as we}from"./label-DuYqV78G.js";import{T as os}from"./textarea-CXw6G-FR.js";import{S as cs,a as ns,b as ms,c as ds,d as _e}from"./select-DovHCdPZ.js";import{B as Pe}from"./badge-ChulLRju.js";import{a as d,T as Oe,b as ps,c as xs}from"./tabs-BRtNUSAT.js";import{X as us}from"./x-Bt0xiKB6.js";import{P as ze}from"./plus-CtJ91gAH.js";import{I as Re}from"./image-R21ObJXb.js";import{C as fs}from"./clock-C6uL_UTr.js";import{C as hs}from"./circle-alert-CcOvuODZ.js";/* empty css            */import"./mainLogo-DLPf11nU.js";import"./index-DHBIVXlt.js";import"./index-DJ7leduO.js";import"./index-SNSbR3uR.js";import"./index-Ckz0jMhM.js";import"./index-wwFZohYQ.js";import"./index-DtCFime1.js";import"./dropdown-menu-BgmB5nLj.js";import"./index-D6b3eXot.js";import"./store-Vo9JkbWw.js";import"./qr-code-Siyit084.js";import"./ticket-AIeTpaEa.js";import"./index-6A6XRfFG.js";import"./chevron-down-DObrU-ok.js";import"./check-BJMn0M_N.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],js=Le("CircleCheckBig",gs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ys=Le("CircleX",bs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Be=Le("MessageSquare",Ns);function it(c){const e=Xe.c(138),{tickets:ee,counts:l,currentStatus:n}=c,[Ce,se]=$e.useState(!1);let te;e[0]===Symbol.for("react.memo_cache_sentinel")?(te=[],e[0]=te):te=e[0];const[m,le]=$e.useState(te);let ae;e[1]===Symbol.for("react.memo_cache_sentinel")?(ae=[],e[1]=ae):ae=e[1];let re;e[2]===Symbol.for("react.memo_cache_sentinel")?(re={subject:"",description:"",priority:"medium",images:ae},e[2]=re):re=e[2];const{data:a,setData:r,processing:p,errors:o,reset:x}=Ye(re);let ie;e[3]!==a.description||e[4]!==a.images||e[5]!==a.priority||e[6]!==a.subject||e[7]!==x?(ie=t=>{t.preventDefault();const i=new FormData;i.append("subject",a.subject),i.append("description",a.description),i.append("priority",a.priority),a.images.forEach((W,Z)=>{i.append(`images[${Z}]`,W)}),Me.post("/business/tickets",i,{onSuccess:()=>{se(!1),x(),le([])}})},e[3]=a.description,e[4]=a.images,e[5]=a.priority,e[6]=a.subject,e[7]=x,e[8]=ie):ie=e[8];const Se=ie;let oe;e[9]!==a.images||e[10]!==m||e[11]!==r?(oe=t=>{const i=Array.from(t.target.files||[]),W=[...a.images,...i];r("images",W);const Z=i.map(Ss);le([...m,...Z])},e[9]=a.images,e[10]=m,e[11]=r,e[12]=oe):oe=e[12];const Te=oe;let ce;e[13]!==a.images||e[14]!==m||e[15]!==r?(ce=t=>{const i=a.images.filter((Z,Ie)=>Ie!==t);r("images",i);const W=m.filter((Z,Ie)=>Ie!==t);le(W)},e[13]=a.images,e[14]=m,e[15]=r,e[16]=ce):ce=e[16];const De=ce,Ee=Cs,Ve=_s,qe=ws,Ue=vs;let ne;e[17]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ge,{title:"Tickets"}),e[17]=ne):ne=e[17];let me;e[18]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Ke,{title:"Tickets",description:"Manage your support tickets here."}),e[18]=me):me=e[18];let de;e[19]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(es,{asChild:!0,children:s.jsxs(ve,{className:"w-full sm:w-auto",children:[s.jsx(ze,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})}),e[19]=de):de=e[19];let pe;e[20]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsxs(ss,{children:[s.jsx(ts,{children:"Create New Ticket"}),s.jsx(ls,{children:"Submit a support ticket and we'll get back to you as soon as possible."})]}),e[20]=pe):pe=e[20];let xe;e[21]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(we,{htmlFor:"subject",children:"Subject"}),e[21]=xe):xe=e[21];let u;e[22]!==r?(u=t=>r("subject",t.target.value),e[22]=r,e[23]=u):u=e[23];let f;e[24]!==a.subject||e[25]!==u?(f=s.jsx(He,{id:"subject",value:a.subject,onChange:u,placeholder:"Brief description of the issue"}),e[24]=a.subject,e[25]=u,e[26]=f):f=e[26];let h;e[27]!==o.subject?(h=o.subject&&s.jsx("p",{className:"text-sm text-red-500",children:o.subject}),e[27]=o.subject,e[28]=h):h=e[28];let g;e[29]!==f||e[30]!==h?(g=s.jsxs("div",{className:"grid gap-2",children:[xe,f,h]}),e[29]=f,e[30]=h,e[31]=g):g=e[31];let ue;e[32]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(we,{htmlFor:"priority",children:"Priority"}),e[32]=ue):ue=e[32];let j;e[33]!==r?(j=t=>r("priority",t),e[33]=r,e[34]=j):j=e[34];let fe;e[35]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(ns,{children:s.jsx(ms,{})}),e[35]=fe):fe=e[35];let he;e[36]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsxs(ds,{children:[s.jsx(_e,{value:"low",children:"Low"}),s.jsx(_e,{value:"medium",children:"Medium"}),s.jsx(_e,{value:"high",children:"High"}),s.jsx(_e,{value:"urgent",children:"Urgent"})]}),e[36]=he):he=e[36];let b;e[37]!==a.priority||e[38]!==j?(b=s.jsxs(cs,{value:a.priority,onValueChange:j,children:[fe,he]}),e[37]=a.priority,e[38]=j,e[39]=b):b=e[39];let y;e[40]!==o.priority?(y=o.priority&&s.jsx("p",{className:"text-sm text-red-500",children:o.priority}),e[40]=o.priority,e[41]=y):y=e[41];let N;e[42]!==b||e[43]!==y?(N=s.jsxs("div",{className:"grid gap-2",children:[ue,b,y]}),e[42]=b,e[43]=y,e[44]=N):N=e[44];let ge;e[45]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(we,{htmlFor:"description",children:"Description"}),e[45]=ge):ge=e[45];let v;e[46]!==r?(v=t=>r("description",t.target.value),e[46]=r,e[47]=v):v=e[47];let w;e[48]!==a.description||e[49]!==v?(w=s.jsx(os,{id:"description",value:a.description,onChange:v,placeholder:"Provide detailed information about your issue...",rows:5}),e[48]=a.description,e[49]=v,e[50]=w):w=e[50];let _;e[51]!==o.description?(_=o.description&&s.jsx("p",{className:"text-sm text-red-500",children:o.description}),e[51]=o.description,e[52]=_):_=e[52];let C;e[53]!==w||e[54]!==_?(C=s.jsxs("div",{className:"grid gap-2",children:[ge,w,_]}),e[53]=w,e[54]=_,e[55]=C):C=e[55];let je;e[56]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(we,{htmlFor:"images",children:"Attachments (Optional)"}),e[56]=je):je=e[56];let S;e[57]!==Te?(S=s.jsx(He,{id:"images",type:"file",accept:"image/*",multiple:!0,onChange:Te,className:"cursor-pointer"}),e[57]=Te,e[58]=S):S=e[58];let be;e[59]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Re,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),e[59]=be):be=e[59];let T;e[60]!==S?(T=s.jsxs("div",{className:"flex items-center gap-2",children:[S,be]}),e[60]=S,e[61]=T):T=e[61];let ye;e[62]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload multiple images (max 5MB each)"}),e[62]=ye):ye=e[62];let D;e[63]!==m||e[64]!==De?(D=m.length>0&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2",children:m.map((t,i)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:t,alt:`Preview ${i+1}`,className:"w-full h-24 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>De(i),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(us,{className:"h-3 w-3"})})]},i))}),e[63]=m,e[64]=De,e[65]=D):D=e[65];let k;e[66]!==T||e[67]!==D?(k=s.jsxs("div",{className:"grid gap-2",children:[je,T,ye,D]}),e[66]=T,e[67]=D,e[68]=k):k=e[68];let I;e[69]!==g||e[70]!==N||e[71]!==C||e[72]!==k?(I=s.jsxs("div",{className:"grid gap-4 py-4",children:[g,N,C,k]}),e[69]=g,e[70]=N,e[71]=C,e[72]=k,e[73]=I):I=e[73];let P;e[74]!==x?(P=()=>{se(!1),x(),le([])},e[74]=x,e[75]=P):P=e[75];let M;e[76]!==p||e[77]!==P?(M=s.jsx(ve,{type:"button",variant:"outline",onClick:P,disabled:p,className:"w-full sm:w-auto",children:"Cancel"}),e[76]=p,e[77]=P,e[78]=M):M=e[78];const ke=p?"Creating...":"Create Ticket";let B;e[79]!==p||e[80]!==ke?(B=s.jsx(ve,{type:"submit",disabled:p,className:"w-full sm:w-auto",children:ke}),e[79]=p,e[80]=ke,e[81]=B):B=e[81];let L;e[82]!==M||e[83]!==B?(L=s.jsxs(as,{className:"flex-col sm:flex-row gap-2",children:[M,B]}),e[82]=M,e[83]=B,e[84]=L):L=e[84];let $;e[85]!==Se||e[86]!==I||e[87]!==L?($=s.jsx(rs,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:s.jsxs("form",{onSubmit:Se,children:[pe,I,L]})}),e[85]=Se,e[86]=I,e[87]=L,e[88]=$):$=e[88];let A;e[89]!==Ce||e[90]!==$?(A=s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4",children:[me,s.jsxs(is,{open:Ce,onOpenChange:se,children:[de,$]})]}),e[89]=Ce,e[90]=$,e[91]=A):A=e[91];let F;e[92]!==l.all?(F=s.jsxs(d,{value:"all",className:"flex-1 whitespace-nowrap px-4",children:["All (",l.all,")"]}),e[92]=l.all,e[93]=F):F=e[93];let H;e[94]!==l.open?(H=s.jsxs(d,{value:"open",className:"flex-1 whitespace-nowrap px-4",children:["Open (",l.open,")"]}),e[94]=l.open,e[95]=H):H=e[95];let O;e[96]!==l.in_progress?(O=s.jsxs(d,{value:"in_progress",className:"flex-1 whitespace-nowrap px-4",children:["In Progress (",l.in_progress,")"]}),e[96]=l.in_progress,e[97]=O):O=e[97];let z;e[98]!==l.resolved?(z=s.jsxs(d,{value:"resolved",className:"flex-1 whitespace-nowrap px-4",children:["Resolved (",l.resolved,")"]}),e[98]=l.resolved,e[99]=z):z=e[99];let R;e[100]!==l.closed?(R=s.jsxs(d,{value:"closed",className:"flex-1 whitespace-nowrap px-4",children:["Closed (",l.closed,")"]}),e[100]=l.closed,e[101]=R):R=e[101];let E;e[102]!==F||e[103]!==H||e[104]!==O||e[105]!==z||e[106]!==R?(E=s.jsx("div",{className:"md:hidden overflow-x-auto",children:s.jsxs(Oe,{className:"inline-flex w-auto min-w-full",children:[F,H,O,z,R]})}),e[102]=F,e[103]=H,e[104]=O,e[105]=z,e[106]=R,e[107]=E):E=e[107];let V;e[108]!==l.all?(V=s.jsxs(d,{value:"all",children:["All (",l.all,")"]}),e[108]=l.all,e[109]=V):V=e[109];let q;e[110]!==l.open?(q=s.jsxs(d,{value:"open",children:["Open (",l.open,")"]}),e[110]=l.open,e[111]=q):q=e[111];let U;e[112]!==l.in_progress?(U=s.jsxs(d,{value:"in_progress",children:["In Progress (",l.in_progress,")"]}),e[112]=l.in_progress,e[113]=U):U=e[113];let X;e[114]!==l.resolved?(X=s.jsxs(d,{value:"resolved",children:["Resolved (",l.resolved,")"]}),e[114]=l.resolved,e[115]=X):X=e[115];let Y;e[116]!==l.closed?(Y=s.jsxs(d,{value:"closed",children:["Closed (",l.closed,")"]}),e[116]=l.closed,e[117]=Y):Y=e[117];let G;e[118]!==V||e[119]!==q||e[120]!==U||e[121]!==X||e[122]!==Y?(G=s.jsxs(Oe,{className:"hidden md:grid w-full grid-cols-5",children:[V,q,U,X,Y]}),e[118]=V,e[119]=q,e[120]=U,e[121]=X,e[122]=Y,e[123]=G):G=e[123];let J;e[124]!==n||e[125]!==ee?(J=ee.length===0?s.jsx(Ae,{children:s.jsxs(Fe,{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx(Be,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2 text-center",children:"No tickets found"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4 text-sm",children:n==="all"?"You haven't created any tickets yet.":`No ${n.replace("_"," ")} tickets.`}),s.jsxs(ve,{onClick:()=>se(!0),className:"w-full sm:w-auto",children:[s.jsx(ze,{className:"h-4 w-4 mr-2"}),"Create Your First Ticket"]})]})}):s.jsx("div",{className:"grid gap-4",children:ee.map(t=>s.jsxs(Ae,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Me.visit(`/business/tickets/${t.id}`),children:[s.jsx(Qe,{className:"pb-3",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"text-base sm:text-lg truncate",children:t.subject}),t.has_images&&s.jsx(Re,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),s.jsxs(Ze,{className:"flex flex-wrap items-center gap-1 sm:gap-2 text-xs",children:[s.jsx("span",{className:"font-mono",children:t.ticket_number}),s.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),s.jsx("span",{className:"truncate",children:t.created_at})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Pe,{variant:"outline",className:`text-xs ${Ue(t.priority_color)}`,children:t.priority}),s.jsxs(Pe,{variant:"outline",className:`flex items-center gap-1 text-xs ${qe(t.status_color)}`,children:[Ve(t.status),s.jsx("span",{className:"hidden sm:inline",children:t.status.replace("_"," ")}),s.jsx("span",{className:"sm:hidden capitalize",children:t.status.split("_")[0]})]})]})]})}),s.jsxs(Fe,{className:"pt-0",children:[s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 sm:mb-4",children:t.description}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Be,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-xs sm:text-sm",children:[t.replies_count," ",t.replies_count===1?"reply":"replies"]})]}),t.last_reply&&s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[s.jsxs("span",{className:"truncate",children:["Last reply: ",t.last_reply.created_at]}),t.last_reply.is_staff&&s.jsx(Pe,{variant:"outline",className:"text-xs flex-shrink-0",children:"Staff"})]})]})]})]},t.id))}),e[124]=n,e[125]=ee,e[126]=J):J=e[126];let K;e[127]!==n||e[128]!==J?(K=s.jsx(ps,{value:n,className:"mt-4 md:mt-6",children:J}),e[127]=n,e[128]=J,e[129]=K):K=e[129];let Q;e[130]!==n||e[131]!==E||e[132]!==G||e[133]!==K?(Q=s.jsxs(xs,{value:n,onValueChange:Ee,children:[E,G,K]}),e[130]=n,e[131]=E,e[132]=G,e[133]=K,e[134]=Q):Q=e[134];let Ne;return e[135]!==A||e[136]!==Q?(Ne=s.jsxs(Je,{children:[ne,s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[A,Q]})]}),e[135]=A,e[136]=Q,e[137]=Ne):Ne=e[137],Ne}function vs(c){const e={gray:"bg-gray-100 text-gray-800 border-gray-200",blue:"bg-blue-100 text-blue-800 border-blue-200",orange:"bg-orange-100 text-orange-800 border-orange-200",red:"bg-red-100 text-red-800 border-red-200"};return e[c]||e.gray}function ws(c){const e={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return e[c]||e.gray}function _s(c){switch(c){case"open":return s.jsx(hs,{className:"h-4 w-4"});case"in_progress":return s.jsx(fs,{className:"h-4 w-4"});case"resolved":return s.jsx(js,{className:"h-4 w-4"});case"closed":return s.jsx(ys,{className:"h-4 w-4"});default:return s.jsx(Be,{className:"h-4 w-4"})}}function Cs(c){Me.get("/business/tickets",{status:c},{preserveState:!0})}function Ss(c){return URL.createObjectURL(c)}export{it as default};
