import{a as Ue,r,j as e,H as Pe,b as u,t as R}from"./app-6m_tBlQ0.js";import{L as Fe,B as l}from"./mainLogo-C_8TsP8m.js";import{S as se,a as ae,b as le,c as re,d as te}from"./select-ftCaCQSd.js";import{d as de,b as ce,T as j,c as d,e as ne,a as t}from"./table-CXlMcLNf.js";import{e as ie,d as me,D as oe,a as xe,b as Ge,c as he}from"./dialog-B-bBuMFw.js";import{I as je}from"./input-BTbceNkS.js";import{L as z}from"./label-i1EL1qMu.js";import{T as Ie}from"./textarea-BWbiO4Rr.js";import{B as c}from"./badge-CH208ZfP.js";import{c as n,d as i,C as T,a as D}from"./card-CR5FxzGm.js";import{c as Me,T as ze,a as B,b as H}from"./tabs-CHmp2QxZ.js";import{L as ge}from"./index-CnAgjxnu.js";import{X as Be}from"./x-DJg8p6-8.js";import{A as g}from"./index-D7Nf6Ao1.js";import{S as pe}from"./sparkles-2S0oYQL3.js";import{C as b}from"./check-CyXpps3U.js";import{Q as A,T as x}from"./ticket-NfnqDTX4.js";import{S as Ne}from"./search-7MuQjbPZ.js";import{E as ue}from"./eye-C6gzLxnq.js";import{U as be}from"./undo-2-DricXKWX.js";import{U as fe}from"./user-DfwTmxeX.js";import{C as He}from"./calendar-CZUH_Mzg.js";/* empty css            */import"./utils-DFaayVYX.js";import"./index-DyDgrtE5.js";import"./index-C_9dUjvr.js";import"./index-CZUm0VxS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],$e=Ue("Menu",Ve);function us({code:f,cards:m=[],loyalty_card_id:y,perkClaims:ye=[],stampCodes:we=[],stats:O}){const[V,w]=r.useState(!1),[E,$]=r.useState(!1),[o,U]=r.useState(y?.toString()||(m.length>0?m[0].id.toString():"")),[Q,h]=r.useState(null),[P,ve]=r.useState(!1),[a,F]=r.useState(null),[ke,v]=r.useState(!1),[Ce,G]=r.useState(!1),[W,I]=r.useState(""),[M,q]=r.useState(!1),[k,Se]=r.useState(""),[C,Le]=r.useState(""),[Re,Te]=r.useState("issue-stamp");r.useEffect(()=>{y&&U(y.toString())},[y]);const De=()=>{if(!o){h("Please select a loyalty card");return}w(!0),h(null),u.get("/staff/dashboard",{loyalty_card_id:o}),w(!1)},Ae=()=>{if(!o){h("Please select a loyalty card");return}w(!0),h(null),u.get("/staff/dashboard",{loyalty_card_id:o}),w(!1)},K=async()=>{$(!0),h(null);try{const s=await fetch(`/staff/generate-offline?id=${o}`,{method:"GET",headers:{Accept:"application/pdf"}});if(!s.ok)throw new Error("Failed to generate offline stamps");const Ee=await s.blob(),ee=window.URL.createObjectURL(Ee),N=document.createElement("a");N.href=ee,N.download=`loyalty-stamps-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(ee),document.body.removeChild(N)}catch(s){h("Failed to download offline stamps. Please try again."),console.error("Download error:",s)}finally{$(!1)}},p=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",X=s=>{F(s),G(!0)},J=s=>{F(s),I(""),v(!0)},Oe=()=>{a&&(q(!0),u.post(`/staff/perk-claims/${a.id}/redeem`,{remarks:W},{onSuccess:()=>{R.success("Perk marked as redeemed successfully!"),v(!1),I(""),F(null)},onError:()=>{R.error("Failed to mark perk as redeemed.")},onFinish:()=>{q(!1)}}))},Y=s=>{confirm("Are you sure you want to undo this redemption?")&&u.post(`/staff/perk-claims/${s.id}/undo`,{},{onSuccess:()=>{R.success("Redemption undone successfully!")},onError:()=>{R.error("Failed to undo redemption.")}})},Z=()=>{u.post("/staff/logout")},_=s=>s.is_expired?e.jsx(c,{className:"bg-red-500 text-white",children:"Expired"}):s.used_at?e.jsx(c,{className:"bg-green-500 text-white",children:"Used"}):e.jsx(c,{variant:"default",children:"Active"}),S=ye.filter(s=>s.customer.username.toLowerCase().includes(k.toLowerCase())||s.perk.reward.toLowerCase().includes(k.toLowerCase())||s.loyalty_card.name.toLowerCase().includes(k.toLowerCase())),L=we.filter(s=>s.code.toLowerCase().includes(C.toLowerCase())||s.customer?.username.toLowerCase().includes(C.toLowerCase())||s.loyalty_card.name.toLowerCase().includes(C.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{title:"Staff Dashboard"}),e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsx("img",{src:Fe,alt:"business logo",className:"h-12"})})}),e.jsx("div",{className:"hidden md:flex items-center gap-4",children:e.jsxs(l,{variant:"ghost",onClick:Z,className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Logout"]})}),e.jsx("button",{onClick:()=>ve(!P),className:"md:hidden p-2 rounded-lg hover:bg-gray-100",children:P?e.jsx(Be,{className:"w-6 h-6"}):e.jsx($e,{className:"w-6 h-6"})})]})}),P&&e.jsx("div",{className:"md:hidden border-t border-gray-200 bg-white",children:e.jsx("div",{className:"px-4 py-3 space-y-2",children:e.jsxs(l,{variant:"ghost",onClick:Z,className:"w-full justify-start gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Logout"]})})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back! ðŸ‘‹"}),e.jsx("p",{className:"text-gray-600",children:"Manage customer loyalty and rewards"})]}),e.jsxs("div",{className:"md:grid hidden grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(n,{className:"shadow-lg",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-black text-sm font-medium",children:"Total Claims"}),e.jsx("p",{className:"text-4xl font-bold mt-2",children:O?.total||0})]}),e.jsx(g,{className:"w-12 h-12 text-blue-200"})]})})}),e.jsx(n,{className:" shadow-lg",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-black text-sm font-medium",children:"Available"}),e.jsx("p",{className:"text-4xl font-bold mt-2",children:O?.available||0})]}),e.jsx(pe,{className:"w-12 h-12 text-green-200"})]})})}),e.jsx(n,{className:"shadow-lg",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-black text-sm font-medium",children:"Redeemed"}),e.jsx("p",{className:"text-4xl font-bold mt-2",children:O?.redeemed||0})]}),e.jsx(b,{className:"w-12 h-12 text-purple-200"})]})})})]}),e.jsxs(Me,{value:Re,onValueChange:Te,className:"space-y-6",children:[e.jsxs(ze,{className:"grid w-full grid-cols-3 bg-white shadow-sm p-1",children:[e.jsxs(B,{value:"issue-stamp",className:"flex items-center gap-2 data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Issue Stamp"})]}),e.jsxs(B,{value:"perk-claims",className:"flex items-center gap-2 data-[state=active]:bg-green-600 data-[state=active]:text-white",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Perk Claims"})]}),e.jsxs(B,{value:"stamp-codes",className:"flex items-center gap-2 data-[state=active]:bg-purple-600 data-[state=active]:text-white",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Stamp Codes"})]})]}),e.jsx(H,{value:"issue-stamp",className:"space-y-6",children:f?.success?e.jsxs(n,{className:"shadow-lg border-0",children:[e.jsx(T,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-b",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(D,{children:"Code Generated Successfully! ðŸŽ‰"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Generated on ",f?.created_at]})]})]})}),e.jsxs(i,{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:f?.qr_url,alt:"QR Code",className:"w-72 h-72 rounded-lg shadow-lg"}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Or enter manually:"}),e.jsx("div",{className:"bg-gray-100 px-8 py-4 rounded-lg inline-block",children:e.jsx("p",{className:"text-3xl font-mono font-bold text-gray-900 tracking-wider",children:f?.code})})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"âš ï¸ Important"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Code expires in 15 minutes if unused."})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Generate Another Code"}),e.jsxs(se,{value:o,onValueChange:U,children:[e.jsx(ae,{className:"w-full h-12",children:e.jsx(le,{})}),e.jsx(re,{children:m.map(s=>e.jsx(te,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{onClick:Ae,className:"h-12 bg-gradient-to-r from-blue-600 to-indigo-600",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),"Generate New"]}),e.jsxs(l,{onClick:K,disabled:E,variant:"outline",className:"h-12 border-2",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"Download Tickets"]})]})]})]}):e.jsxs(n,{className:"shadow-lg border-0",children:[e.jsx(T,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Generate New Stamp Code"]})}),e.jsxs(i,{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"loyalty-card",className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Select Loyalty Card"}),m.length>0?e.jsxs(se,{value:o,onValueChange:U,children:[e.jsx(ae,{className:"w-full h-12",children:e.jsx(le,{placeholder:"Select a loyalty card"})}),e.jsx(re,{children:m.map(s=>e.jsx(te,{value:s.id.toString(),children:s.name},s.id))})]}):e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-700 text-sm",children:"No loyalty cards available. Contact administrator."})]}),Q&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm flex items-start gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Error:"})," ",Q]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{onClick:De,disabled:V||m.length===0,className:"h-12 bg-primary",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),V?"Generating...":"Generate Code"]}),e.jsxs(l,{onClick:K,disabled:E||m.length===0,variant:"outline",className:"h-12 border-2",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),E?"Generating...":"Download 8 Tickets"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-700",children:[e.jsx("p",{className:"font-semibold mb-1",children:"ðŸ’¡ Quick Tip"}),e.jsx("p",{children:"Offline stamps are perfect for events or areas without internet. Print 8 tickets at once!"})]})]})]})}),e.jsx(H,{value:"perk-claims",className:"space-y-6",children:e.jsxs(n,{className:"shadow-lg border-0",children:[e.jsx(T,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Customer Perk Claims"]})}),e.jsxs(i,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(je,{type:"text",placeholder:"Search by customer, reward, or card...",value:k,onChange:s=>Se(s.target.value),className:"pl-10 h-12"})]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto rounded-lg border",children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(j,{className:"bg-gray-50",children:[e.jsx(d,{className:"font-semibold",children:"Customer"}),e.jsx(d,{className:"font-semibold",children:"Reward"}),e.jsx(d,{className:"font-semibold",children:"Card"}),e.jsx(d,{className:"font-semibold",children:"Status"}),e.jsx(d,{className:"font-semibold",children:"Actions"})]})}),e.jsx(ne,{children:S.length>0?S.map(s=>e.jsxs(j,{className:"hover:bg-gray-50",children:[e.jsxs(t,{children:[e.jsx("div",{className:"font-medium",children:s.customer.username}),e.jsx("div",{className:"text-xs text-gray-500",children:s.customer.email})]}),e.jsx(t,{className:"font-medium",children:s.perk.reward}),e.jsx(t,{children:s.loyalty_card.name}),e.jsx(t,{children:s.is_redeemed?e.jsx(c,{className:"bg-gray-500",children:"Redeemed"}):e.jsx(c,{className:"bg-green-500",children:"Available"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>X(s),children:e.jsx(ue,{className:"w-4 h-4"})}),s.is_redeemed?e.jsx(l,{size:"sm",variant:"outline",onClick:()=>Y(s),children:e.jsx(be,{className:"w-4 h-4"})}):e.jsx(l,{size:"sm",onClick:()=>J(s),className:"bg-green-600 hover:bg-green-700",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},s.id)):e.jsx(j,{children:e.jsxs(t,{colSpan:5,className:"text-center py-12 text-gray-500",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No perk claims found."})]})})})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:S.length>0?S.map(s=>e.jsx(n,{className:"shadow-md",children:e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-base",children:s.customer.username}),e.jsx("p",{className:"text-xs text-gray-500",children:s.customer.email})]}),s.is_redeemed?e.jsx(c,{className:"bg-gray-500",children:"Redeemed"}):e.jsx(c,{className:"bg-green-500",children:"Available"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.perk.reward})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s.loyalty_card.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[s.stamps_at_claim," stamps"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>X(s),className:"flex-1",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Details"]}),s.is_redeemed?e.jsxs(l,{size:"sm",variant:"outline",onClick:()=>Y(s),className:"flex-1",children:[e.jsx(be,{className:"w-4 h-4 mr-1"}),"Undo"]}):e.jsxs(l,{size:"sm",onClick:()=>J(s),className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(b,{className:"w-4 h-4 mr-1"}),"Redeem"]})]})]})},s.id)):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(g,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No perk claims found."})]})})]})]})}),e.jsx(H,{value:"stamp-codes",className:"space-y-6",children:e.jsxs(n,{className:"shadow-lg border-0",children:[e.jsx(T,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Stamp Code History"]})}),e.jsxs(i,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx(je,{type:"text",placeholder:"Search stamp codes or customers...",value:C,onChange:s=>Le(s.target.value),className:"pl-10 h-12"})]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto rounded-lg border",children:e.jsxs(de,{children:[e.jsx(ce,{children:e.jsxs(j,{className:"bg-gray-50",children:[e.jsx(d,{className:"font-semibold",children:"Card"}),e.jsx(d,{className:"font-semibold",children:"Code"}),e.jsx(d,{className:"font-semibold",children:"Customer"}),e.jsx(d,{className:"font-semibold",children:"Status"}),e.jsx(d,{className:"font-semibold",children:"Created"})]})}),e.jsx(ne,{children:L.length>0?L.map(s=>e.jsxs(j,{className:"hover:bg-gray-50",children:[e.jsx(t,{className:"font-medium",children:s.loyalty_card.name}),e.jsx(t,{className:"font-mono text-sm",children:s.code}),e.jsx(t,{children:s.customer?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.customer.username}),e.jsx("div",{className:"text-xs text-gray-500",children:s.customer.email})]}):e.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),e.jsx(t,{children:_(s)}),e.jsx(t,{className:"text-sm",children:p(s.created_at)})]},s.id)):e.jsx(j,{children:e.jsxs(t,{colSpan:5,className:"text-center py-12 text-gray-500",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No stamp codes found."})]})})})]})}),e.jsx("div",{className:"lg:hidden space-y-4",children:L.length>0?L.map(s=>e.jsx(n,{className:"shadow-md",children:e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-mono font-semibold text-base",children:s.code}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.loyalty_card.name})]}),_(s)]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.customer?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.customer.username})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:s.customer.email})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Unassigned"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:p(s.created_at)})]}),s.used_at&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["Used: ",p(s.used_at)]})]})]})]})},s.id)):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No stamp codes found."})]})})]})]})})]})]})]}),e.jsx(ie,{open:ke,onOpenChange:v,children:e.jsxs(me,{children:[e.jsxs(oe,{children:[e.jsx(xe,{children:"Mark as Redeemed"}),e.jsx(Ge,{children:"Confirm that this perk has been redeemed by the customer."})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-medium",children:a.customer.username})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Reward:"}),e.jsx("span",{className:"font-medium",children:a.perk.reward})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"remarks",children:"Remarks (Optional)"}),e.jsx(Ie,{id:"remarks",placeholder:"Add any notes...",value:W,onChange:s=>I(s.target.value),rows:3})]})]}),e.jsxs(he,{children:[e.jsx(l,{variant:"outline",onClick:()=>v(!1),disabled:M,children:"Cancel"}),e.jsx(l,{onClick:Oe,disabled:M,className:"bg-green-600 hover:bg-green-700",children:M?"Processing...":"Mark as Redeemed"})]})]})}),e.jsx(ie,{open:Ce,onOpenChange:G,children:e.jsxs(me,{className:"max-w-2xl",children:[e.jsx(oe,{children:e.jsx(xe,{className:"text-xl",children:"Perk Claim Details"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Customer"}),e.jsx("p",{className:"font-semibold text-lg",children:a.customer.username}),e.jsx("p",{className:"text-sm text-gray-500",children:a.customer.email})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),a.is_redeemed?e.jsx(c,{className:"bg-gray-500 mt-1",children:"Redeemed"}):e.jsx(c,{className:"bg-green-500 mt-1",children:"Available"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold mb-1",children:"REWARD"}),e.jsx("p",{className:"font-semibold text-lg text-gray-900",children:a.perk.reward}),a.perk.details&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.perk.details})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Loyalty Card"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.loyalty_card.logo&&e.jsx("img",{src:`/${a.loyalty_card.logo}`,alt:a.loyalty_card.name,className:"w-10 h-10 rounded-full object-cover"}),e.jsx("span",{className:"font-semibold",children:a.loyalty_card.name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Stamps at Claim"}),e.jsx("p",{className:"font-semibold text-2xl",children:a.stamps_at_claim})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Claimed At"}),e.jsx("p",{className:"font-semibold text-sm",children:p(a.created_at)})]})]}),a.is_redeemed&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:"Redeemed At"}),e.jsx("p",{className:"font-semibold text-sm",children:a.redeemed_at?p(a.redeemed_at):"N/A"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold mb-1",children:"Redeemed By"}),e.jsx("p",{className:"font-semibold text-sm",children:a.redeemed_by?.username||"N/A"})]})]}),a.remarks&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-xs text-yellow-600 font-semibold mb-1",children:"REMARKS"}),e.jsx("p",{className:"text-sm text-gray-700",children:a.remarks})]})]})]}),e.jsx(he,{children:e.jsx(l,{variant:"outline",onClick:()=>G(!1),children:"Close"})})]})})]})}export{us as default};
