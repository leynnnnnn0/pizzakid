import{a as ze,c as Ye,r as Me,u as qe,j as s,b as Be,H as Ge}from"./app-DuceoJ0J.js";import{A as Je}from"./app-layout-DyojmV0S.js";import{M as Ke}from"./module-heading-BRepoz4l.js";import{c as Ae,d as Fe,C as Qe,a as We,b as Ze}from"./card-Cns3jMbl.js";import{f as es,D as ss,a as ts,b as ls,c as rs,d as as,e as is}from"./dialog-BaJx1M6G.js";import{B as ve}from"./button-t8u1VYkF.js";import{I as $e}from"./input-DJOwwOVZ.js";import{L as we}from"./label-W3-IRHvi.js";import{T as os}from"./textarea-CRRKiHZa.js";import{S as cs,a as ns,b as ms,c as ds,d as _e}from"./select-CjzNULIx.js";import{B as Pe}from"./badge-DYukfgGG.js";import{a as d,T as Oe,b as ps,c as xs}from"./tabs-BSvmiyzm.js";import{X as fs}from"./x-DIyWGspr.js";import{M as Le}from"./message-square-BQgwvvRn.js";import{P as He}from"./plus-D_eArce5.js";import{I as Re}from"./image-DQDM_yjO.js";import{C as us}from"./clock-vY8gElC6.js";import{C as hs}from"./circle-alert-BWGxArh1.js";/* empty css            */import"./mainLogo-CW_GsqmJ.js";import"./index-CYbdUeLD.js";import"./index-ndIa727E.js";import"./index-w1bmU6gN.js";import"./index-DzIlf0WO.js";import"./index-DBpAnX-I.js";import"./index-BAaMoty2.js";import"./dropdown-menu-Cyu4m-O3.js";import"./index-D6b3eXot.js";import"./store-Bv9UiSx5.js";import"./qr-code-C_yZfEoS.js";import"./ticket-CWn-3CB0.js";import"./index-8sA-VECH.js";import"./chevron-down-COTQKLov.js";import"./check-BtFtoQLB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],js=ze("CircleCheckBig",gs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ys=ze("CircleX",bs);function it(c){const e=Ye.c(138),{tickets:ee,counts:l,currentStatus:n}=c,[Ce,se]=Me.useState(!1);let te;e[0]===Symbol.for("react.memo_cache_sentinel")?(te=[],e[0]=te):te=e[0];const[m,le]=Me.useState(te);let re;e[1]===Symbol.for("react.memo_cache_sentinel")?(re=[],e[1]=re):re=e[1];let ae;e[2]===Symbol.for("react.memo_cache_sentinel")?(ae={subject:"",description:"",priority:"medium",images:re},e[2]=ae):ae=e[2];const{data:r,setData:a,processing:p,errors:o,reset:x}=qe(ae);let ie;e[3]!==r.description||e[4]!==r.images||e[5]!==r.priority||e[6]!==r.subject||e[7]!==x?(ie=t=>{t.preventDefault();const i=new FormData;i.append("subject",r.subject),i.append("description",r.description),i.append("priority",r.priority),r.images.forEach((W,Z)=>{i.append(`images[${Z}]`,W)}),Be.post("/business/tickets",i,{onSuccess:()=>{se(!1),x(),le([])}})},e[3]=r.description,e[4]=r.images,e[5]=r.priority,e[6]=r.subject,e[7]=x,e[8]=ie):ie=e[8];const Se=ie;let oe;e[9]!==r.images||e[10]!==m||e[11]!==a?(oe=t=>{const i=Array.from(t.target.files||[]),W=[...r.images,...i];a("images",W);const Z=i.map(Cs);le([...m,...Z])},e[9]=r.images,e[10]=m,e[11]=a,e[12]=oe):oe=e[12];const Te=oe;let ce;e[13]!==r.images||e[14]!==m||e[15]!==a?(ce=t=>{const i=r.images.filter((Z,ke)=>ke!==t);a("images",i);const W=m.filter((Z,ke)=>ke!==t);le(W)},e[13]=r.images,e[14]=m,e[15]=a,e[16]=ce):ce=e[16];const De=ce,Ee=_s,Ue=ws,Ve=vs,Xe=Ns;let ne;e[17]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ge,{title:"Tickets"}),e[17]=ne):ne=e[17];let me;e[18]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(Ke,{title:"Tickets",description:"Manage your support tickets here."}),e[18]=me):me=e[18];let de;e[19]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(es,{asChild:!0,children:s.jsxs(ve,{className:"w-full sm:w-auto",children:[s.jsx(He,{className:"h-4 w-4 mr-2"}),"Create Ticket"]})}),e[19]=de):de=e[19];let pe;e[20]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsxs(ss,{children:[s.jsx(ts,{children:"Create New Ticket"}),s.jsx(ls,{children:"Submit a support ticket and we'll get back to you as soon as possible."})]}),e[20]=pe):pe=e[20];let xe;e[21]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(we,{htmlFor:"subject",children:"Subject"}),e[21]=xe):xe=e[21];let f;e[22]!==a?(f=t=>a("subject",t.target.value),e[22]=a,e[23]=f):f=e[23];let u;e[24]!==r.subject||e[25]!==f?(u=s.jsx($e,{id:"subject",value:r.subject,onChange:f,placeholder:"Brief description of the issue"}),e[24]=r.subject,e[25]=f,e[26]=u):u=e[26];let h;e[27]!==o.subject?(h=o.subject&&s.jsx("p",{className:"text-sm text-red-500",children:o.subject}),e[27]=o.subject,e[28]=h):h=e[28];let g;e[29]!==u||e[30]!==h?(g=s.jsxs("div",{className:"grid gap-2",children:[xe,u,h]}),e[29]=u,e[30]=h,e[31]=g):g=e[31];let fe;e[32]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(we,{htmlFor:"priority",children:"Priority"}),e[32]=fe):fe=e[32];let j;e[33]!==a?(j=t=>a("priority",t),e[33]=a,e[34]=j):j=e[34];let ue;e[35]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(ns,{children:s.jsx(ms,{})}),e[35]=ue):ue=e[35];let he;e[36]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsxs(ds,{children:[s.jsx(_e,{value:"low",children:"Low"}),s.jsx(_e,{value:"medium",children:"Medium"}),s.jsx(_e,{value:"high",children:"High"}),s.jsx(_e,{value:"urgent",children:"Urgent"})]}),e[36]=he):he=e[36];let b;e[37]!==r.priority||e[38]!==j?(b=s.jsxs(cs,{value:r.priority,onValueChange:j,children:[ue,he]}),e[37]=r.priority,e[38]=j,e[39]=b):b=e[39];let y;e[40]!==o.priority?(y=o.priority&&s.jsx("p",{className:"text-sm text-red-500",children:o.priority}),e[40]=o.priority,e[41]=y):y=e[41];let N;e[42]!==b||e[43]!==y?(N=s.jsxs("div",{className:"grid gap-2",children:[fe,b,y]}),e[42]=b,e[43]=y,e[44]=N):N=e[44];let ge;e[45]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(we,{htmlFor:"description",children:"Description"}),e[45]=ge):ge=e[45];let v;e[46]!==a?(v=t=>a("description",t.target.value),e[46]=a,e[47]=v):v=e[47];let w;e[48]!==r.description||e[49]!==v?(w=s.jsx(os,{id:"description",value:r.description,onChange:v,placeholder:"Provide detailed information about your issue...",rows:5}),e[48]=r.description,e[49]=v,e[50]=w):w=e[50];let _;e[51]!==o.description?(_=o.description&&s.jsx("p",{className:"text-sm text-red-500",children:o.description}),e[51]=o.description,e[52]=_):_=e[52];let C;e[53]!==w||e[54]!==_?(C=s.jsxs("div",{className:"grid gap-2",children:[ge,w,_]}),e[53]=w,e[54]=_,e[55]=C):C=e[55];let je;e[56]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(we,{htmlFor:"images",children:"Attachments (Optional)"}),e[56]=je):je=e[56];let S;e[57]!==Te?(S=s.jsx($e,{id:"images",type:"file",accept:"image/*",multiple:!0,onChange:Te,className:"cursor-pointer"}),e[57]=Te,e[58]=S):S=e[58];let be;e[59]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Re,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),e[59]=be):be=e[59];let T;e[60]!==S?(T=s.jsxs("div",{className:"flex items-center gap-2",children:[S,be]}),e[60]=S,e[61]=T):T=e[61];let ye;e[62]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload multiple images (max 5MB each)"}),e[62]=ye):ye=e[62];let D;e[63]!==m||e[64]!==De?(D=m.length>0&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2",children:m.map((t,i)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:t,alt:`Preview ${i+1}`,className:"w-full h-24 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>De(i),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(fs,{className:"h-3 w-3"})})]},i))}),e[63]=m,e[64]=De,e[65]=D):D=e[65];let I;e[66]!==T||e[67]!==D?(I=s.jsxs("div",{className:"grid gap-2",children:[je,T,ye,D]}),e[66]=T,e[67]=D,e[68]=I):I=e[68];let k;e[69]!==g||e[70]!==N||e[71]!==C||e[72]!==I?(k=s.jsxs("div",{className:"grid gap-4 py-4",children:[g,N,C,I]}),e[69]=g,e[70]=N,e[71]=C,e[72]=I,e[73]=k):k=e[73];let P;e[74]!==x?(P=()=>{se(!1),x(),le([])},e[74]=x,e[75]=P):P=e[75];let B;e[76]!==p||e[77]!==P?(B=s.jsx(ve,{type:"button",variant:"outline",onClick:P,disabled:p,className:"w-full sm:w-auto",children:"Cancel"}),e[76]=p,e[77]=P,e[78]=B):B=e[78];const Ie=p?"Creating...":"Create Ticket";let L;e[79]!==p||e[80]!==Ie?(L=s.jsx(ve,{type:"submit",disabled:p,className:"w-full sm:w-auto",children:Ie}),e[79]=p,e[80]=Ie,e[81]=L):L=e[81];let M;e[82]!==B||e[83]!==L?(M=s.jsxs(rs,{className:"flex-col sm:flex-row gap-2",children:[B,L]}),e[82]=B,e[83]=L,e[84]=M):M=e[84];let A;e[85]!==Se||e[86]!==k||e[87]!==M?(A=s.jsx(as,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:s.jsxs("form",{onSubmit:Se,children:[pe,k,M]})}),e[85]=Se,e[86]=k,e[87]=M,e[88]=A):A=e[88];let F;e[89]!==Ce||e[90]!==A?(F=s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4",children:[me,s.jsxs(is,{open:Ce,onOpenChange:se,children:[de,A]})]}),e[89]=Ce,e[90]=A,e[91]=F):F=e[91];let $;e[92]!==l.all?($=s.jsxs(d,{value:"all",className:"flex-1 whitespace-nowrap px-4",children:["All (",l.all,")"]}),e[92]=l.all,e[93]=$):$=e[93];let O;e[94]!==l.open?(O=s.jsxs(d,{value:"open",className:"flex-1 whitespace-nowrap px-4",children:["Open (",l.open,")"]}),e[94]=l.open,e[95]=O):O=e[95];let H;e[96]!==l.in_progress?(H=s.jsxs(d,{value:"in_progress",className:"flex-1 whitespace-nowrap px-4",children:["In Progress (",l.in_progress,")"]}),e[96]=l.in_progress,e[97]=H):H=e[97];let R;e[98]!==l.resolved?(R=s.jsxs(d,{value:"resolved",className:"flex-1 whitespace-nowrap px-4",children:["Resolved (",l.resolved,")"]}),e[98]=l.resolved,e[99]=R):R=e[99];let z;e[100]!==l.closed?(z=s.jsxs(d,{value:"closed",className:"flex-1 whitespace-nowrap px-4",children:["Closed (",l.closed,")"]}),e[100]=l.closed,e[101]=z):z=e[101];let E;e[102]!==$||e[103]!==O||e[104]!==H||e[105]!==R||e[106]!==z?(E=s.jsx("div",{className:"md:hidden overflow-x-auto",children:s.jsxs(Oe,{className:"inline-flex w-auto min-w-full",children:[$,O,H,R,z]})}),e[102]=$,e[103]=O,e[104]=H,e[105]=R,e[106]=z,e[107]=E):E=e[107];let U;e[108]!==l.all?(U=s.jsxs(d,{value:"all",children:["All (",l.all,")"]}),e[108]=l.all,e[109]=U):U=e[109];let V;e[110]!==l.open?(V=s.jsxs(d,{value:"open",children:["Open (",l.open,")"]}),e[110]=l.open,e[111]=V):V=e[111];let X;e[112]!==l.in_progress?(X=s.jsxs(d,{value:"in_progress",children:["In Progress (",l.in_progress,")"]}),e[112]=l.in_progress,e[113]=X):X=e[113];let Y;e[114]!==l.resolved?(Y=s.jsxs(d,{value:"resolved",children:["Resolved (",l.resolved,")"]}),e[114]=l.resolved,e[115]=Y):Y=e[115];let q;e[116]!==l.closed?(q=s.jsxs(d,{value:"closed",children:["Closed (",l.closed,")"]}),e[116]=l.closed,e[117]=q):q=e[117];let G;e[118]!==U||e[119]!==V||e[120]!==X||e[121]!==Y||e[122]!==q?(G=s.jsxs(Oe,{className:"hidden md:grid w-full grid-cols-5",children:[U,V,X,Y,q]}),e[118]=U,e[119]=V,e[120]=X,e[121]=Y,e[122]=q,e[123]=G):G=e[123];let J;e[124]!==n||e[125]!==ee?(J=ee.length===0?s.jsx(Ae,{children:s.jsxs(Fe,{className:"flex flex-col items-center justify-center py-12 px-4",children:[s.jsx(Le,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2 text-center",children:"No tickets found"}),s.jsx("p",{className:"text-muted-foreground text-center mb-4 text-sm",children:n==="all"?"You haven't created any tickets yet.":`No ${n.replace("_"," ")} tickets.`}),s.jsxs(ve,{onClick:()=>se(!0),className:"w-full sm:w-auto",children:[s.jsx(He,{className:"h-4 w-4 mr-2"}),"Create Your First Ticket"]})]})}):s.jsx("div",{className:"grid gap-4",children:ee.map(t=>s.jsxs(Ae,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Be.visit(`/business/tickets/${t.id}`),children:[s.jsx(Qe,{className:"pb-3",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"text-base sm:text-lg truncate",children:t.subject}),t.has_images&&s.jsx(Re,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),s.jsxs(Ze,{className:"flex flex-wrap items-center gap-1 sm:gap-2 text-xs",children:[s.jsx("span",{className:"font-mono",children:t.ticket_number}),s.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),s.jsx("span",{className:"truncate",children:t.created_at})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Pe,{variant:"outline",className:`text-xs ${Xe(t.priority_color)}`,children:t.priority}),s.jsxs(Pe,{variant:"outline",className:`flex items-center gap-1 text-xs ${Ve(t.status_color)}`,children:[Ue(t.status),s.jsx("span",{className:"hidden sm:inline",children:t.status.replace("_"," ")}),s.jsx("span",{className:"sm:hidden capitalize",children:t.status.split("_")[0]})]})]})]})}),s.jsxs(Fe,{className:"pt-0",children:[s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 sm:mb-4",children:t.description}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Le,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-xs sm:text-sm",children:[t.replies_count," ",t.replies_count===1?"reply":"replies"]})]}),t.last_reply&&s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[s.jsxs("span",{className:"truncate",children:["Last reply: ",t.last_reply.created_at]}),t.last_reply.is_staff&&s.jsx(Pe,{variant:"outline",className:"text-xs flex-shrink-0",children:"Staff"})]})]})]})]},t.id))}),e[124]=n,e[125]=ee,e[126]=J):J=e[126];let K;e[127]!==n||e[128]!==J?(K=s.jsx(ps,{value:n,className:"mt-4 md:mt-6",children:J}),e[127]=n,e[128]=J,e[129]=K):K=e[129];let Q;e[130]!==n||e[131]!==E||e[132]!==G||e[133]!==K?(Q=s.jsxs(xs,{value:n,onValueChange:Ee,children:[E,G,K]}),e[130]=n,e[131]=E,e[132]=G,e[133]=K,e[134]=Q):Q=e[134];let Ne;return e[135]!==F||e[136]!==Q?(Ne=s.jsxs(Je,{children:[ne,s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[F,Q]})]}),e[135]=F,e[136]=Q,e[137]=Ne):Ne=e[137],Ne}function Ns(c){const e={gray:"bg-gray-100 text-gray-800 border-gray-200",blue:"bg-blue-100 text-blue-800 border-blue-200",orange:"bg-orange-100 text-orange-800 border-orange-200",red:"bg-red-100 text-red-800 border-red-200"};return e[c]||e.gray}function vs(c){const e={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return e[c]||e.gray}function ws(c){switch(c){case"open":return s.jsx(hs,{className:"h-4 w-4"});case"in_progress":return s.jsx(us,{className:"h-4 w-4"});case"resolved":return s.jsx(js,{className:"h-4 w-4"});case"closed":return s.jsx(ys,{className:"h-4 w-4"});default:return s.jsx(Le,{className:"h-4 w-4"})}}function _s(c){Be.get("/business/tickets",{status:c},{preserveState:!0})}function Cs(c){return URL.createObjectURL(c)}export{it as default};
