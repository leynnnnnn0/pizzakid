import{a as X,c as ee,r as W,j as e,b as F,H as se,I as te,T as re,t as Y}from"./app-BELBKpes.js";import{M as le}from"./module-heading-qsnWc3bK.js";import{B as P}from"./button-nU1hvmlC.js";import{c as ae,C as ie,a as oe,b as ce,d as ne}from"./card-TFUQPzMn.js";import{B as V}from"./badge-AqVV6JDZ.js";import{A as de,a as he}from"./alert-MD6uSFtt.js";import{A as me,a as xe,b as pe,c as fe,e as ge,f as ue,d as je,g as ye}from"./alert-dialog-ZOFdV4xN.js";import{T as be,a as we,b as Ne,c as ve,A as Ce}from"./app-layout-ojULHhWj.js";import{S as Z}from"./sparkles-Dc6UGqRo.js";import{P as ke}from"./plus-Zl74z6P9.js";import{A as Le}from"./index-C9QvDtcI.js";import{E as _e}from"./eye-Drs3ozWI.js";import{T as Ae}from"./trash-2-C64kVF6O.js";/* empty css            */import"./index-DOwu2Jtr.js";import"./x-Cq7ovUpJ.js";import"./index-DMd68jTr.js";import"./index-BScKngJZ.js";import"./dropdown-menu-BFJBx4pO.js";import"./index-D6b3eXot.js";import"./mainLogo-CSczizqJ.js";import"./store-CJMaAY7C.js";import"./ticket-M12z_2rk.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Se=X("SquarePen",De);function is(l){const s=ee.c(31),{cardTemplates:d}=l;let j;s[0]!==d?(j=d===void 0?[]:d,s[0]=d,s[1]=j):j=s[1];const h=j,[E,q]=W.useState(null),[I,y]=W.useState(!1),[b,B]=W.useState(null),U=Ee;let w;s[2]===Symbol.for("react.memo_cache_sentinel")?(w=o=>{B(o),y(!0)},s[2]=w):w=s[2];const G=w;let N;s[3]!==b?(N=()=>{b&&(F.delete(`/business/card-templates/${b}`,{onSuccess:Fe,onError:Pe}),y(!1),B(null))},s[3]=b,s[4]=N):N=s[4];const R=N;let v;s[5]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{y(!1),B(null)},s[5]=v):v=s[5];const J=v,K=Me,Q=$e;let C;s[6]!==E?(C=o=>{const{shape:t,isFilled:c,isReward:i,rewardText:T,filledColor:n,emptyColor:z,stampImage:r,details:H,index:a}=o,$=c?n:z,M=c?"#FFFFFF":"#D1D5DB",O={circle:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[e.jsx("defs",{children:r&&e.jsx("pattern",{id:`stampPattern-${a}`,x:"0",y:"0",width:"1",height:"1",children:e.jsx("image",{href:`/${r}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:r&&c?`url(#stampPattern-${a})`:$,stroke:M,strokeWidth:"3"})]}),star:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[e.jsx("defs",{children:r&&e.jsx("pattern",{id:`stampPattern-${a}`,x:"0",y:"0",width:"1",height:"1",children:e.jsx("image",{href:`/${r}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),e.jsx("path",{d:"M50 5 L55 20 L70 15 L70 30 L85 35 L75 47 L85 59 L70 64 L70 79 L55 74 L50 89 L45 74 L30 79 L30 64 L15 59 L25 47 L15 35 L30 30 L30 15 L45 20 Z",fill:r&&c?`url(#stampPattern-${a})`:$,stroke:M,strokeWidth:"3"})]}),square:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[e.jsx("defs",{children:r&&e.jsx("pattern",{id:`stampPattern-${a}`,x:"0",y:"0",width:"1",height:"1",children:e.jsx("image",{href:`/${r}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),e.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"12",fill:r&&c?`url(#stampPattern-${a})`:$,stroke:M,strokeWidth:"3"})]}),hexagon:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[e.jsx("defs",{children:r&&e.jsx("pattern",{id:`stampPattern-${a}`,x:"0",y:"0",width:"1",height:"1",children:e.jsx("image",{href:`/${r}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),e.jsx("path",{d:"M50 5 L90 27.5 L90 72.5 L50 95 L10 72.5 L10 27.5 Z",fill:r&&c?`url(#stampPattern-${a})`:$,stroke:M,strokeWidth:"3"})]})};return e.jsxs("div",{className:"relative group",onMouseEnter:()=>i&&H&&q(`${a}`),onMouseLeave:()=>q(null),children:[O[t]||O.circle,i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-[8px] text-center px-0.5 leading-tight drop-shadow-lg",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:T})}),c&&!i&&!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Z,{size:12,className:"text-white animate-pulse"})}),i&&H&&E===`${a}`&&e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-20",children:e.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 shadow-xl whitespace-nowrap max-w-[200px] text-center",children:[e.jsx("div",{className:"font-bold mb-1",children:T}),e.jsx("div",{className:"text-gray-300 text-[10px]",children:H}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:e.jsx("div",{className:"border-4 border-transparent border-t-gray-900"})})]})})]})},s[6]=E,s[7]=C):C=s[7];const u=C;let k;s[8]===Symbol.for("react.memo_cache_sentinel")?(k=e.jsx(se,{title:"Loyalty Cards"}),s[8]=k):k=s[8];let L;s[9]===Symbol.for("react.memo_cache_sentinel")?(L=e.jsx(le,{title:"Loyalty Cards",description:"List of your loyalty cards",children:e.jsxs(P,{onClick:Te,children:[e.jsx(ke,{className:"h-4 w-4"})," Create New Template"]})}),s[9]=L):L=s[9];let m;s[10]!==h.length?(m=h.length===0&&e.jsxs(de,{className:"mt-8",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx(he,{children:"No loyalty cards yet. Create your first loyalty card template to get started!"})]}),s[10]=h.length,s[11]=m):m=s[11];let x;if(s[12]!==u||s[13]!==h){let o;s[15]!==u?(o=t=>e.jsxs(ae,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[e.jsx("div",{className:"relative h-64 p-6 mt-0",style:{backgroundColor:t.backgroundColor,backgroundImage:t.backgroundImage?`url(/${t.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:e.jsx("div",{className:"h-full backdrop-blur-sm rounded-lg",style:{backgroundColor:t.backgroundImage?"rgba(0,0,0,0.2)":"transparent"},children:e.jsxs("div",{className:"p-4 h-full flex flex-col",children:[t.logo&&e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("img",{src:`/${t.logo}`,alt:"Logo",className:"h-12 w-12 object-cover rounded-full border-2 border-white shadow-lg"})}),e.jsx("h3",{className:"text-lg font-bold text-center mb-1 tracking-wide",style:{color:t.textColor},children:t.heading}),t.subheading&&e.jsx("p",{className:"text-center text-xs mb-3 opacity-90",style:{color:t.textColor},children:t.subheading}),e.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-3 flex-1",children:Array.from({length:t.stampsNeeded}).map((c,i)=>{const T=i+1,n=Q(t.perks||[],T),z=i<Math.floor(t.stampsNeeded*.6);return e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-8 h-8",children:e.jsx(u,{shape:t.stampShape,isFilled:z,isReward:!!n,rewardText:n?.reward,color:n?n.color:t.stampFilledColor,filledColor:t.stampFilledColor,emptyColor:t.stampEmptyColor,stampImage:t.stampImage,details:n?.details,index:`${t.id}-${i}`})})},i)})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-[10px] opacity-75",style:{color:t.textColor},children:t.footer||"Loyalty Card"})})]})})}),e.jsx(ie,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs(oe,{className:"text-lg flex items-center gap-2",children:[t.name,t.perks&&t.perks.length>0&&e.jsxs(V,{className:"text-xs bg-green-500 text-white",children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),t.perks.length," Perks"]}),t.is_expired&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(be,{children:e.jsxs(we,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(V,{className:"bg-red-500",children:["Expired      ",e.jsx(te,{className:"h-4 w-4 cursor-help"})]})}),e.jsx(ve,{children:e.jsx("p",{children:"Expired loyalty card is not visible to customers"})})]})})})]}),e.jsxs(ce,{className:"mt-1",children:[t.stampsNeeded," stamps needed | Valid Until: ",t.valid_until_formatted]})]})})}),e.jsxs(ne,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.mechanics}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>K(t.id),children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(P,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>U(t.id),children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx(P,{variant:"destructive",size:"sm",onClick:()=>G(t.id),children:e.jsx(Ae,{className:"h-4 w-4"})})]})]})]},t.id),s[15]=u,s[16]=o):o=s[16],x=h.map(o),s[12]=u,s[13]=h,s[14]=x}else x=s[14];let p;s[17]!==x?(p=e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:x}),s[17]=x,s[18]=p):p=s[18];let _;s[19]===Symbol.for("react.memo_cache_sentinel")?(_=e.jsxs(me,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-red-500"}),"Delete Loyalty Card Template?"]}),s[19]=_):_=s[19];let A;s[20]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsxs(xe,{children:[_,e.jsxs(pe,{className:"space-y-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Are you sure you want to delete this loyalty card template?"}),e.jsx("span",{children:"Customers who are already using this loyalty card might be shocked that it's gone. This action cannot be undone and will affect all existing customer cards using this template."})]})]}),s[20]=A):A=s[20];let D;s[21]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsx(fe,{onClick:J,children:"Cancel"}),s[21]=D):D=s[21];let f;s[22]!==R?(f=e.jsxs(ge,{children:[A,e.jsxs(ue,{children:[D,e.jsx(je,{onClick:R,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete Template"})]})]}),s[22]=R,s[23]=f):f=s[23];let g;s[24]!==I||s[25]!==f?(g=e.jsx(ye,{open:I,onOpenChange:y,children:f}),s[24]=I,s[25]=f,s[26]=g):g=s[26];let S;return s[27]!==p||s[28]!==g||s[29]!==m?(S=e.jsxs(Ce,{children:[k,L,m,p,g]}),s[27]=p,s[28]=g,s[29]=m,s[30]=S):S=s[30],S}function Te(){return F.visit("/business/card-templates/create")}function $e(l,s){return l.find(d=>d.stampNumber===s)}function Me(l){F.visit(`/business/card-templates/${l}`)}function Pe(l){l.error?Y.error(l.error):Y.error("An error occured.")}function Fe(){Y.success("Deleted Successfully.")}function Ee(l){F.visit(`/business/card-templates/${l}/edit`)}export{is as default};
